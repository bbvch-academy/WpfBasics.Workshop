<UserControl x:Class="MySbbInfo.TimeTableControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:lex="http://wpflocalizeextension.codeplex.com"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:mySbbInfo="clr-namespace:MySbbInfo"
             d:DesignHeight="300"
             d:DesignWidth="300"
             lex:ResxLocalizationProvider.DefaultAssembly="MySbbInfo"
             lex:ResxLocalizationProvider.DefaultDictionary="Translation"
             mc:Ignorable="d">
    <UserControl.Resources>
        <mySbbInfo:OccupancyToImageSourceConverter x:Key="OccupancyConverter" />
    </UserControl.Resources>
    <Grid>
        <Grid.Resources>
            <Style TargetType="Label">
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="FontSize" Value="12" />
            </Style>
        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />

            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Label Content="{lex:Loc From}" />
        <Label Grid.Row="1" Content="{lex:Loc To}" />

        <TextBox x:Name="txtFrom"
                 Grid.Column="1"
                 Text="Lauterbrunnen" />
        <TextBox x:Name="txtTo"
                 Grid.Row="1"
                 Grid.Column="1"
                 Text="Bümpliz, Schloss" />

        <Button Grid.Row="2"
                Grid.Column="1"
                Height="30"
                Margin="0, 10"
                Click="SearchConnectionsClick"
                Content="{lex:Loc SearchForConnection}" />

        <DataGrid x:Name="ConnectionsGrid"
                  Grid.Row="3"
                  Grid.ColumnSpan="2"
                  Margin="0,2,0,-2"
                  AutoGenerateColumns="False"
                  CanUserReorderColumns="False"
                  IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Path=From.Station.Name}" Header="{lex:Loc MySbbInfo:Translation:Start}" />
                <DataGridTextColumn Binding="{Binding Path=From.Departure, StringFormat=dd.MM.yy HH:mm}" />
                <DataGridTextColumn Binding="{Binding Path=To.Station.Name}" Header="{lex:Loc MySbbInfo:Translation:Destination}" />
                <DataGridTextColumn Binding="{Binding Path=To.Arrival, StringFormat=dd.MM.yy HH:mm}" />
                <DataGridTextColumn Binding="{Binding Path=Duration, StringFormat=hh\\:mm}" Header="{lex:Loc MySbbInfo:Translation:Duration}" />
                <DataGridTemplateColumn Header="{lex:Loc MySbbInfo:Translation:Occupancy}">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Image Source="{Binding Path=Capacity1st, Converter={StaticResource OccupancyConverter}}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
